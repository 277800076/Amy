layui.use(["layer","datatable"],function(){var t=layui.jquery,a=layui.layer;t(function(){t("#productTable").dataTable({language:lang,autoWidth:!1,lengthMenu:[10,20,30],stripeClasses:["odd","even"],searching:!0,paging:!0,lengthChange:!0,info:!0,order:[1,"desc"],aoColumnDefs:[{orderable:!1,aTargets:[0,4,8]}],deferRender:!0,ajax:"../../../json/product.json",columns:[{data:function(t){return'<input type="checkbox" name="article-list" data-id='+t.id+">"}},{data:"id"},{data:"sorts"},{data:function(t){return'<u class="btn-showarticle">'+t.title+"</u>"}},{data:function(t){return""==t.thumbImg?'<img src="../../src/imgs/common/no-pic.png" layer-src="../../src/imgs/common/no-pic.png" class="pdut-thumbnail" alt="默认缩略图">':'<img src="'+t.thumbImg+'" layer-src="'+t.thumbImg+'" class="pdut-thumbnail" alt="缩略图">'}},{data:"describe",className:"oneline tl"},{data:function(t){return t.unitPrice+"元"}},{data:function(t){return t.status?'<span class="label label-success radius">正常销售</span>':'<span class="label label-default radius">暂停销售</span>'},className:"td-status"},{data:function(t){return t.status?'<span title="暂停销售" class="handle-btn handle-btn-stop"><i class="linyer icon-zanting"></i></span><span title="编辑" class="handle-btn handle-btn-edit"><i class="linyer icon-edit"></i></span><span title="删除" class="handle-btn handle-btn-delect"><i class="linyer icon-delect"></i></span>':'<span title="正常销售" class="handle-btn handle-btn-run"><i class="linyer icon-qiyong"></i></span><span title="编辑" class="handle-btn handle-btn-edit"><i class="linyer icon-edit"></i></span><span title="删除" class="handle-btn handle-btn-delect"><i class="linyer icon-delect"></i></span>'},className:"td-handle"}]}),t(".table-sort thead").find(".tl").removeClass("tl")}),t(".btn-showuser").on("click",function(){var a=t(this).html(),n="product-show.html",e=t(this).parents("tr").attr("data-userid");console.log(e),layer_show(a,n,e,"800","600")}),t("#btn-adduser").on("click",function(){var a=t(this).html(),n="product-add.html";layer_show(a,n,"","800","600")}),t(".table-sort").on("click",".handle-btn-stop",function(){var n=t(this);n.parents("tr").attr("data-userid");a.confirm("确认要暂停销售吗？",{icon:0,title:"警告",shade:!1},function(e){t(n).parents("tr").find(".td-handle").prepend('<span class="handle-btn handle-btn-run" title="开始销售"><i class="linyer icon-qiyong"></i></span>'),t(n).parents("tr").find(".td-status").html('<span class="label label-default radius">暂停销售</span>'),t(n).remove(),a.msg("已暂停销售!",{icon:5,time:1e3})})}),t(".table-sort").on("click",".handle-btn-run",function(){var n=t(this);n.parents("tr").attr("data-userid");a.confirm("确认要开始销售吗？",{icon:0,title:"警告",shade:!1},function(e){t(n).parents("tr").find(".td-handle").prepend('<span class="handle-btn handle-btn-stop" title="暂停销售"><i class="linyer icon-zanting"></i></span>'),t(n).parents("tr").find(".td-status").html('<span class="label label-success radius">正常销售</span>'),t(n).remove(),a.msg("已开始销售!",{icon:6,time:1e3})})}),t(".table-sort").on("click",".handle-btn-edit",function(){var a=t(this),n=a.parents("tr").attr("data-userid");layer_show("编辑","product-edit.html",n,"600","500")}),t(".table-sort").on("click",".handle-btn-delect",function(){var n=t(this);n.parents("tr").attr("data-userid");a.confirm("确认要删除吗？",{icon:0,title:"警告",shade:!1},function(e){t(n).parents("tr").remove(),a.msg("已删除!",{icon:1,time:1e3})})})});