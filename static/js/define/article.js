layui.use(["layer","datatable"],function(){var e=layui.jquery,n=layui.layer;e(function(){e("#articleTable").dataTable({language:lang,autoWidth:!1,lengthMenu:[15,30,50],stripeClasses:["odd","even"],searching:!0,paging:!0,lengthChange:!0,info:!0,order:[1,"desc"],aoColumnDefs:[{orderable:!1,aTargets:[0,4,7]}],deferRender:!0,ajax:"../../../json/article.json",columns:[{data:function(e){return'<input type="checkbox" name="article-list" data-id='+e.id+">"}},{data:"id"},{data:"articleSorts"},{data:function(e){return'<u class="btn-showarticle">'+e.articleTitle+"</u>"}},{data:"articleContents",className:"oneline"},{data:function(e){return replaceTime(e.releaseTime/1e3)}},{data:function(e){return e.releaseStatus?'<span class="label label-success radius">正常发布</span>':'<span class="label label-default radius">暂停发布</span>'},className:"td-status"},{data:function(e){return e.releaseStatus?'<span title="暂停发布" class="handle-btn handle-btn-stop"><i class="linyer icon-zanting"></i></span><span title="编辑" class="handle-btn handle-btn-edit"><i class="linyer icon-edit"></i></span><span title="删除" class="handle-btn handle-btn-delect"><i class="linyer icon-delect"></i></span>':'<span title="正常发布" class="handle-btn handle-btn-run"><i class="linyer icon-qiyong"></i></span><span title="编辑" class="handle-btn handle-btn-edit"><i class="linyer icon-edit"></i></span><span title="删除" class="handle-btn handle-btn-delect"><i class="linyer icon-delect"></i></span>'},className:"td-handle"}]})}),e(".btn-showarticle").on("click",function(){var n=e(this).html(),t="article-show.html";layer_show(n,t,"","360","400")}),e("#btn-adduser").on("click",function(){var n=e(this).html(),t="article-add.html";layer_show(n,t,"","800","600")}),e(".table-sort").on("click",".handle-btn-stop",function(){var t=e(this);n.confirm("确认要暂停发布吗？",{icon:0,title:"警告",shade:!1},function(a){e(t).parents("tr").find(".td-handle").prepend('<span class="handle-btn handle-btn-run" title="开始发布"><i class="linyer icon-qiyong"></i></span>'),e(t).parents("tr").find(".td-status").html('<span class="label label-default radius">暂停发布</span>'),e(t).remove(),n.msg("已暂停发布!",{icon:5,time:1e3})})}),e(".table-sort").on("click",".handle-btn-run",function(){var t=e(this);n.confirm("确认要开始发布吗？",{icon:0,title:"警告",shade:!1},function(a){e(t).parents("tr").find(".td-handle").prepend('<span class="handle-btn handle-btn-stop" title="暂停发布"><i class="linyer icon-zanting"></i></span>'),e(t).parents("tr").find(".td-status").html('<span class="label label-success radius">正常发布</span>'),e(t).remove(),n.msg("已开始发布!",{icon:6,time:1e3})})}),e(".table-sort").on("click",".handle-btn-edit",function(){e(this);layer_show("编辑","article-edit.html","","600","500")}),e(".table-sort").on("click",".handle-btn-delect",function(){var t=e(this);n.confirm("确认要删除吗？",{icon:0,title:"警告",shade:!1},function(a){e(t).parents("tr").remove(),n.msg("已删除!",{icon:1,time:1e3})})}),e("#btn-delect-all").on("click",function(){console.log(e(".table-sort tbody :checkbox:checked").length),0==e(".table-sort tbody :checkbox:checked").length?n.msg("请选择需要删除的数据！",{icon:0}):n.confirm("确认要删除吗？",{icon:0,title:"警告",shade:!1},function(t){e(".table-sort tbody :checkbox:checked").parents("tr").remove(),n.msg("已删除!",{icon:1,time:1e3})})})});